!function(t,e){"use strict";var o="scroller",a=null,r={base:"scroller",content:"scroller-content",bar:"scroller-bar",track:"scroller-track",handle:"scroller-handle",isHorizontal:"scroller-horizontal",isSetup:"scroller-setup",isActive:"scroller-active"},n={start:"touchstart.scroller mousedown.scroller",move:"touchmove.scroller mousemove.scroller",end:"touchend.scroller mouseup.scroller"},l={customClass:"",duration:0,handleSize:0,horizontal:!1,trackMargin:0},i={defaults:function(e){return l=t.extend(l,e||{}),"object"!=typeof this||t(this)},destroy:function(){return t(this).each((function(e,a){var n=t(a).data(o);n&&(n.$scroller.removeClass([n.customClass,r.base,r.isActive].join(" ")),n.$bar.remove(),n.$content.contents().unwrap(),n.$content.off(m(o)),n.$scroller.off(m(o)).removeData(o))}))},scroll:function(e,a){return t(this).each((function(r){var n=t(this).data(o),i=a||l.duration;if("number"!=typeof e){var s=t(e);if(s.length>0){var c=s.position();e=n.horizontal?c.left+n.$content.scrollLeft():c.top+n.$content.scrollTop()}else e=n.$content.scrollTop()}var h=n.horizontal?{scrollLeft:e}:{scrollTop:e};n.$content.stop().animate(h,i)}))},reset:function(){return t(this).each((function(e){var a=t(this).data(o);if(a){a.$scroller.addClass(r.isSetup);var n={},l={},i={},s=0,c=!0;if(a.horizontal)a.barHeight=a.$content[0].offsetHeight-a.$content[0].clientHeight,a.frameWidth=a.$content.outerWidth(),a.trackWidth=a.frameWidth-2*a.trackMargin,a.scrollWidth=a.$content[0].scrollWidth,a.ratio=a.trackWidth/a.scrollWidth,a.trackRatio=a.trackWidth/a.scrollWidth,a.handleWidth=a.handleSize>0?a.handleSize:a.trackWidth*a.trackRatio,a.scrollRatio=(a.scrollWidth-a.frameWidth)/(a.trackWidth-a.handleWidth),a.handleBounds={left:0,right:a.trackWidth-a.handleWidth},a.$content.css({paddingBottom:a.barHeight+a.paddingBottom}),s=a.$content.scrollLeft()*a.ratio,c=a.scrollWidth<=a.frameWidth,n={width:a.frameWidth},l={width:a.trackWidth,marginLeft:a.trackMargin,marginRight:a.trackMargin},i={width:a.handleWidth};else a.barWidth=a.$content[0].offsetWidth-a.$content[0].clientWidth,a.frameHeight=a.$content.outerHeight(),a.trackHeight=a.frameHeight-2*a.trackMargin,a.scrollHeight=a.$content[0].scrollHeight,a.ratio=a.trackHeight/a.scrollHeight,a.trackRatio=a.trackHeight/a.scrollHeight,a.handleHeight=a.handleSize>0?a.handleSize:a.trackHeight*a.trackRatio,a.scrollRatio=(a.scrollHeight-a.frameHeight)/(a.trackHeight-a.handleHeight),a.handleBounds={top:0,bottom:a.trackHeight-a.handleHeight},s=a.$content.scrollTop()*a.ratio,c=a.scrollHeight<=a.frameHeight,n={height:a.frameHeight},l={height:a.trackHeight,marginBottom:a.trackMargin,marginTop:a.trackMargin},i={height:a.handleHeight};c?a.$scroller.removeClass(r.isActive):a.$scroller.addClass(r.isActive),a.$bar.css(n),a.$track.css(l),a.$handle.css(i),v(a,s),a.$scroller.removeClass(r.isSetup)}}))}};function s(e){e=t.extend({},l,e||{}),null===a&&(a=t("body"));for(var o=t(this),r=0,n=o.length;r<n;r++)c(o.eq(r),e);return o}function c(e,a){if(!e.hasClass(r.base)){a=t.extend({},a,e.data("scroller-options"));var l="";l+='<div class="'+r.bar+'">',l+='<div class="'+r.track+'">',l+='<div class="'+r.handle+'">',l+="</div></div></div>",a.paddingRight=parseInt(e.css("padding-right"),10),a.paddingBottom=parseInt(e.css("padding-bottom"),10),e.addClass([r.base,a.customClass].join(" ")).wrapInner('<div class="'+r.content+'" />').prepend(l),a.horizontal&&e.addClass(r.isHorizontal);var s=t.extend({$scroller:e,$content:e.find(m(r.content)),$bar:e.find(m(r.bar)),$track:e.find(m(r.track)),$handle:e.find(m(r.handle))},a);s.trackMargin=parseInt(s.trackMargin,10),s.$content.on("scroll.scroller",s,h),s.$scroller.on(n.start,m(r.track),s,d).on(n.start,m(r.handle),s,u).data(o,s),i.reset.apply(e),t(undefined).one("load",(function(){i.reset.apply(e)}))}}function h(t){t.preventDefault(),t.stopPropagation();var e=t.data,o={};if(e.horizontal){var a=e.$content.scrollLeft();a<0&&(a=0);var r=a/e.scrollRatio;r>e.handleBounds.right&&(r=e.handleBounds.right),o={left:r}}else{var n=e.$content.scrollTop();n<0&&(n=0);var l=n/e.scrollRatio;l>e.handleBounds.bottom&&(l=e.handleBounds.bottom),o={top:l}}e.$handle.css(o)}function d(t){t.preventDefault(),t.stopPropagation();var e=t.data,o=t.originalEvent,a=e.$track.offset(),r=void 0!==o.targetTouches?o.targetTouches[0]:null,n=r?r.pageX:t.clientX,l=r?r.pageY:t.clientY;e.horizontal?(e.mouseStart=n,e.handleLeft=n-a.left-e.handleWidth/2,v(e,e.handleLeft)):(e.mouseStart=l,e.handleTop=l-a.top-e.handleHeight/2,v(e,e.handleTop)),f(e)}function u(t){t.preventDefault(),t.stopPropagation();var e=t.data,o=t.originalEvent,a=void 0!==o.targetTouches?o.targetTouches[0]:null,r=a?a.pageX:t.clientX,n=a?a.pageY:t.clientY;e.horizontal?(e.mouseStart=r,e.handleLeft=parseInt(e.$handle.css("left"),10)):(e.mouseStart=n,e.handleTop=parseInt(e.$handle.css("top"),10)),f(e)}function f(t){t.$content.off(m(o)),a.on(n.move,t,g).on(n.end,t,p)}function g(t){t.preventDefault(),t.stopPropagation();var e=t.data,o=t.originalEvent,a=0,r=0,n=void 0!==o.targetTouches?o.targetTouches[0]:null,l=n?n.pageX:t.clientX,i=n?n.pageY:t.clientY;e.horizontal?(r=e.mouseStart-l,a=e.handleLeft-r):(r=e.mouseStart-i,a=e.handleTop-r),v(e,a)}function p(t){t.preventDefault(),t.stopPropagation();var e=t.data;e.$content.on("scroll.scroller",e,h),a.off(".scroller")}function v(t,e){var o={};if(t.horizontal){e<t.handleBounds.left&&(e=t.handleBounds.left),e>t.handleBounds.right&&(e=t.handleBounds.right);var a=Math.round(e*t.scrollRatio);o={left:e},t.$content.scrollLeft(a)}else{e<t.handleBounds.top&&(e=t.handleBounds.top),e>t.handleBounds.bottom&&(e=t.handleBounds.bottom);var r=Math.round(e*t.scrollRatio);o={top:e},t.$content.scrollTop(r)}t.$handle.css(o)}function m(t){return"."+t}t.fn.scroller=function(t){return i[t]?i[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?this:s.apply(this,arguments)},t.scroller=function(t){"defaults"===t&&i.defaults.apply(this,Array.prototype.slice.call(arguments,1))}}(jQuery);