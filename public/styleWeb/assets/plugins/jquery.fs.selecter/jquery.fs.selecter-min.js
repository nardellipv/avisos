!function(e,t){"use strict";var s=0,l=t.navigator.userAgent||t.navigator.vendor||t.opera,r=/Firefox/i.test(l),a=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(l),o=r&&a,i=null,n={callback:e.noop,cover:!1,customClass:"",label:"",external:!1,links:!1,mobile:!1,trim:0},c={defaults:function(t){return n=e.extend(n,t||{}),"object"!=typeof this||e(this)},disable:function(t){return e(this).each((function(s,l){var r=e(l).parent(".selecter").data("selecter");if(r)if(void 0!==t){var a=r.$items.index(r.$items.filter("[data-value="+t+"]"));r.$items.eq(a).addClass("disabled"),r.$options.eq(a).prop("disabled",!0)}else r.$selecter.hasClass("open")&&r.$selecter.find(".selecter-selected").trigger("click.selecter"),r.$selecter.addClass("disabled"),r.$select.prop("disabled",!0)}))},destroy:function(){return e(this).each((function(t,s){var l=e(s).parent(".selecter").data("selecter");l&&(l.$selecter.hasClass("open")&&l.$selecter.find(".selecter-selected").trigger("click.selecter"),void 0!==e.fn.scroller&&l.$selecter.find(".selecter-options").scroller("destroy"),l.$select[0].tabIndex=l.tabIndex,l.$select.find(".selecter-placeholder").remove(),l.$selected.remove(),l.$itemsWrapper.remove(),l.$selecter.off(".selecter"),l.$select.off(".selecter").removeClass("selecter-element").show().unwrap())}))},enable:function(t){return e(this).each((function(s,l){var r=e(l).parent(".selecter").data("selecter");if(r)if(void 0!==t){var a=r.$items.index(r.$items.filter("[data-value="+t+"]"));r.$items.eq(a).removeClass("disabled"),r.$options.eq(a).prop("disabled",!1)}else r.$selecter.removeClass("disabled"),r.$select.prop("disabled",!1)}))},refresh:function(){return c.update.apply(e(this))},update:function(){return e(this).each((function(t,s){var l=e(s).parent(".selecter").data("selecter");if(l){var r=l.index;l.$allOptions=l.$select.find("option, optgroup"),l.$options=l.$allOptions.filter("option"),l.index=-1,r=l.$options.index(l.$options.filter(":selected")),u(l),l.multiple||q(r,l)}}))}};function d(t){t=e.extend({},n,t||{}),null===i&&(i=e("body"));for(var s=e(this),l=0,r=s.length;l<r;l++)p(s.eq(l),t);return s}function p(t,l){if(!t.hasClass("selecter-element")){(l=e.extend({},l,t.data("selecter-options"))).multiple=t.prop("multiple"),l.disabled=t.is(":disabled"),l.external&&(l.links=!0);var r=t.find("[selected]").not(":disabled"),o=t.find("option").index(r);l.multiple||""===l.label?l.label="":(t.prepend('<option value="" class="selecter-placeholder" selected>'+l.label+"</option>"),o>-1&&o++);var i=t.find("option, optgroup"),n=i.filter("option");r.length||(r=n.eq(0));var c=o>-1?o:0,d=""!==l.label?l.label:r.text();l.tabIndex=t[0].tabIndex,t[0].tabIndex=-1;var p="",v="";v+='<div class="selecter '+l.customClass,a?v+=" mobile":l.cover&&(v+=" cover"),l.multiple?v+=" multiple":v+=" closed",l.disabled&&(v+=" disabled"),v+='" tabindex="'+l.tabIndex+'">',v+="</div>",l.multiple||(p+='<span class="selecter-selected">',p+=e("<span></span>").text(W(d,l.trim)).html(),p+="</span>"),p+='<div class="selecter-options">',p+="</div>",t.addClass("selecter-element").wrap(v).after(p);var $=t.parent(".selecter"),m=e.extend({$select:t,$allOptions:i,$options:n,$selecter:$,$selected:$.find(".selecter-selected"),$itemsWrapper:$.find(".selecter-options"),index:-1,guid:s++},l);u(m),m.multiple||q(c,m),void 0!==e.fn.scroller&&m.$itemsWrapper.scroller(),m.$selecter.on("touchstart.selecter",".selecter-selected",m,f).on("click.selecter",".selecter-selected",m,h).on("click.selecter",".selecter-item",m,g).on("close.selecter",m,b).data("selecter",m),m.$select.on("change.selecter",m,x),a||(m.$selecter.on("focusin.selecter",m,C).on("blur.selecter",m,y),m.$select.on("focusin.selecter",m,(function(e){e.data.$selecter.trigger("focus")})))}}function u(t){for(var s="",l=t.links?"a":"span",r=0,a=t.$allOptions.length;r<a;r++){var o=t.$allOptions.eq(r);if("OPTGROUP"===o[0].tagName)s+='<span class="selecter-group',o.is(":disabled")&&(s+=" disabled"),s+='">'+o.attr("label")+"</span>";else{var i=o.val();o.attr("value")||o.attr("value",i),s+="<"+l+' class="selecter-item',o.hasClass("selecter-placeholder")&&(s+=" placeholder"),o.is(":selected")&&(s+=" selected"),o.is(":disabled")&&(s+=" disabled"),s+='" ',t.links?s+='href="'+i+'"':s+='data-value="'+i+'"',s+=">"+e("<span></span>").text(W(o.text(),t.trim)).html()+"</"+l+">"}}t.$itemsWrapper.html(s),t.$items=t.$selecter.find(".selecter-item")}function f(e){e.stopPropagation();var t=e.data;t.touchStartEvent=e.originalEvent,t.touchStartX=t.touchStartEvent.touches[0].clientX,t.touchStartY=t.touchStartEvent.touches[0].clientY,t.$selecter.on("touchmove.selecter",".selecter-selected",t,v).on("touchend.selecter",".selecter-selected",t,$)}function v(e){var t=e.data,s=e.originalEvent;(Math.abs(s.touches[0].clientX-t.touchStartX)>10||Math.abs(s.touches[0].clientY-t.touchStartY)>10)&&t.$selecter.off("touchmove.selecter touchend.selecter")}function $(e){var t=e.data;t.touchStartEvent.preventDefault(),t.$selecter.off("touchmove.selecter touchend.selecter"),h(e)}function h(s){s.preventDefault(),s.stopPropagation();var l=s.data;if(!l.$select.is(":disabled"))if(e(".selecter").not(l.$selecter).trigger("close.selecter",[l]),l.mobile||!a||o)l.$selecter.hasClass("closed")?function(e){e.preventDefault(),e.stopPropagation();var t=e.data;if(!t.$selecter.hasClass("open")){var s=t.$selecter.offset(),l=i.outerHeight(),r=t.$itemsWrapper.outerHeight(!0);t.index>=0&&t.$items.eq(t.index).position();s.top+r>l&&t.$selecter.addClass("bottom"),t.$itemsWrapper.show(),t.$selecter.removeClass("closed").addClass("open"),i.on("click.selecter-"+t.guid,":not(.selecter-options)",t,m),P(t)}}(s):l.$selecter.hasClass("open")&&b(s);else{var r=l.$select[0];if(t.document.createEvent){var n=t.document.createEvent("MouseEvents");n.initMouseEvent("mousedown",!1,!0,t,0,0,0,0,0,!1,!1,!1,!1,0,null),r.dispatchEvent(n)}else r.fireEvent&&r.fireEvent("onmousedown")}}function m(t){t.preventDefault(),t.stopPropagation(),0===e(t.currentTarget).parents(".selecter").length&&b(t)}function b(e){e.preventDefault(),e.stopPropagation();var t=e.data;t.$selecter.hasClass("open")&&(t.$itemsWrapper.hide(),t.$selecter.removeClass("open bottom").addClass("closed"),i.off(".selecter-"+t.guid))}function g(t){t.preventDefault(),t.stopPropagation();var s=e(this),l=t.data;if(!l.$select.is(":disabled")){if(l.$itemsWrapper.is(":visible")){var r=l.$items.index(s);r!==l.index&&(q(r,l),E(l))}l.multiple||b(t)}}function x(t,s){var l,r=e(this),a=t.data;s||a.multiple||(q(a.$options.index(a.$options.filter("[value='"+(("string"==typeof(l=r.val())?l.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"):l)+"']"))),a),E(a))}function C(t){t.preventDefault(),t.stopPropagation();var s=t.data;s.$select.is(":disabled")||s.multiple||(s.$selecter.addClass("focus").on("keydown.selecter-"+s.guid,s,k),e(".selecter").not(s.$selecter).trigger("close.selecter",[s]))}function y(t,s,l){t.preventDefault(),t.stopPropagation();var r=t.data;r.$selecter.removeClass("focus").off("keydown.selecter-"+r.guid),e(".selecter").not(r.$selecter).trigger("close.selecter",[r])}function k(t){var s=t.data;if(13===t.keyCode)s.$selecter.hasClass("open")&&(b(t),q(s.index,s)),E(s);else if(!(9===t.keyCode||t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)){t.preventDefault(),t.stopPropagation();var l=s.$items.length-1,a=s.index<0?0:s.index;if(e.inArray(t.keyCode,r?[38,40,37,39]:[38,40])>-1)(a+=38===t.keyCode||r&&37===t.keyCode?-1:1)<0&&(a=0),a>l&&(a=l);else{var o,i=String.fromCharCode(t.keyCode).toUpperCase();for(o=s.index+1;o<=l;o++)if(s.$options.eq(o).text().charAt(0).toUpperCase()===i){a=o;break}if(a<0||a===s.index)for(o=0;o<=l;o++)if(s.$options.eq(o).text().charAt(0).toUpperCase()===i){a=o;break}}a>=0&&(q(a,s),P(s))}}function q(e,t){var s=t.$items.eq(e),l=s.hasClass("selected");if(!s.hasClass("disabled"))if(t.multiple)l?(t.$options.eq(e).prop("selected",null),s.removeClass("selected")):(t.$options.eq(e).prop("selected",!0),s.addClass("selected"));else if(e>-1&&e<t.$items.length){var r=s.html();s.data("value");t.$selected.html(r).removeClass("placeholder"),t.$items.filter(".selected").removeClass("selected"),t.$select[0].selectedIndex=e,s.addClass("selected"),t.index=e}else""!==t.label&&t.$selected.html(t.label)}function P(t){var s=t.$items.eq(t.index),l=t.index>=0&&!s.hasClass("placeholder")?s.position():{left:0,top:0};void 0!==e.fn.scroller?t.$itemsWrapper.scroller("scroll",t.$itemsWrapper.find(".scroller-content").scrollTop()+l.top,0).scroller("reset"):t.$itemsWrapper.scrollTop(t.$itemsWrapper.scrollTop()+l.top)}function E(e){e.links?function(e){var s=e.$select.val();e.external?t.open(s):t.location.href=s}(e):(e.callback.call(e.$selecter,e.$select.val(),e.index),e.$select.trigger("change",[!0]))}function W(e,t){return 0===t?e:e.length>t?e.substring(0,t)+"...":e}e.fn.selecter=function(e){return c[e]?c[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?this:d.apply(this,arguments)},e.selecter=function(e){"defaults"===e&&c.defaults.apply(this,Array.prototype.slice.call(arguments,1))}}(jQuery,window);